<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 R programming basics II | R 프로그래밍과 데이터 분석</title>
  <meta name="description" content="UST lecture web site" />
  <meta name="generator" content="bookdown 0.16.5 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 R programming basics II | R 프로그래밍과 데이터 분석" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="UST lecture web site" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 R programming basics II | R 프로그래밍과 데이터 분석" />
  
  <meta name="twitter:description" content="UST lecture web site" />
  

<meta name="author" content="한국생명공학연구원 김하성" />


<meta name="date" content="2020-03-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-programming-basics-i.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">[2020 UST Lecture] R programming</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction 강의 개요</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#goal-강의-목표"><i class="fa fa-check"></i><b>1.1</b> Goal 강의 목표</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#this-course"><i class="fa fa-check"></i><b>1.2</b> This course</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#tips"><i class="fa fa-check"></i><b>1.3</b> Tips</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#references-books-참고-교제"><i class="fa fa-check"></i><b>1.4</b> References books 참고 교제</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#references-참고-자료"><i class="fa fa-check"></i><b>1.5</b> References 참고 자료</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#evaluation-평가-세부-항목"><i class="fa fa-check"></i><b>1.6</b> Evaluation 평가 세부 항목</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#schedule-강의-계획"><i class="fa fa-check"></i><b>1.7</b> Schedule 강의 계획</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-lecture-link.html"><a href="r-lecture-link.html"><i class="fa fa-check"></i><b>2</b> R Lecture Link</a></li>
<li class="chapter" data-level="3" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>3</b> R basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-basics.html"><a href="r-basics.html#what-is-r-rstudio"><i class="fa fa-check"></i><b>3.1</b> What is R / Rstudio</a></li>
<li class="chapter" data-level="3.2" data-path="r-basics.html"><a href="r-basics.html#r-rstudio-installation"><i class="fa fa-check"></i><b>3.2</b> R / Rstudio installation</a></li>
<li class="chapter" data-level="3.3" data-path="r-basics.html"><a href="r-basics.html#rstudio-interface"><i class="fa fa-check"></i><b>3.3</b> Rstudio interface</a></li>
<li class="chapter" data-level="3.4" data-path="r-basics.html"><a href="r-basics.html#keyboard-shortcuts"><i class="fa fa-check"></i><b>3.4</b> Keyboard shortcuts</a></li>
<li class="chapter" data-level="3.5" data-path="r-basics.html"><a href="r-basics.html#set-working-directory"><i class="fa fa-check"></i><b>3.5</b> Set working directory</a></li>
<li class="chapter" data-level="3.6" data-path="r-basics.html"><a href="r-basics.html#hello-world"><i class="fa fa-check"></i><b>3.6</b> Hello world</a></li>
<li class="chapter" data-level="3.7" data-path="r-basics.html"><a href="r-basics.html#help"><i class="fa fa-check"></i><b>3.7</b> Help</a></li>
<li class="chapter" data-level="3.8" data-path="r-basics.html"><a href="r-basics.html#rstudio-workspace"><i class="fa fa-check"></i><b>3.8</b> RStudio workspace</a></li>
<li class="chapter" data-level="3.9" data-path="r-basics.html"><a href="r-basics.html#r-packages"><i class="fa fa-check"></i><b>3.9</b> R packages</a></li>
<li class="chapter" data-level="3.10" data-path="r-basics.html"><a href="r-basics.html#data-sets"><i class="fa fa-check"></i><b>3.10</b> Data sets</a></li>
<li class="chapter" data-level="3.11" data-path="r-basics.html"><a href="r-basics.html#cheatsheet"><i class="fa fa-check"></i><b>3.11</b> Cheatsheet</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html"><i class="fa fa-check"></i><b>4</b> R programming basics I</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#terminology"><i class="fa fa-check"></i><b>4.1</b> Terminology</a></li>
<li class="chapter" data-level="4.2" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#r-console-script"><i class="fa fa-check"></i><b>4.2</b> R console script</a></li>
<li class="chapter" data-level="4.3" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#what-is-a-programming-language"><i class="fa fa-check"></i><b>4.3</b> What is a programming language</a></li>
<li class="chapter" data-level="4.4" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#variables-and-values"><i class="fa fa-check"></i><b>4.4</b> Variables and values</a></li>
<li class="chapter" data-level="4.5" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#variable-type-of-storage-mode"><i class="fa fa-check"></i><b>4.5</b> Variable type of (storage) mode</a></li>
<li class="chapter" data-level="4.6" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#variable---vectors"><i class="fa fa-check"></i><b>4.6</b> Variable - Vectors</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#exercise-3-1"><i class="fa fa-check"></i><b>4.6.1</b> Exercise 3-1</a></li>
<li class="chapter" data-level="4.6.2" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#exercise-3-2"><i class="fa fa-check"></i><b>4.6.2</b> Exercise 3-2</a></li>
<li class="chapter" data-level="4.6.3" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#exercise-3-3"><i class="fa fa-check"></i><b>4.6.3</b> Exercise 3-3</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#variable---matrix"><i class="fa fa-check"></i><b>4.7</b> Variable - matrix</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#exercise-3-4"><i class="fa fa-check"></i><b>4.7.1</b> Exercise 3-4</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#variable---data.frame"><i class="fa fa-check"></i><b>4.8</b> Variable - data.frame</a></li>
<li class="chapter" data-level="4.9" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#variable---list"><i class="fa fa-check"></i><b>4.9</b> Variable - list</a></li>
<li class="chapter" data-level="4.10" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#missing-values"><i class="fa fa-check"></i><b>4.10</b> Missing values</a></li>
<li class="chapter" data-level="4.11" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#some-useful-functions"><i class="fa fa-check"></i><b>4.11</b> Some useful functions</a>
<ul>
<li class="chapter" data-level="4.11.1" data-path="r-programming-basics-i.html"><a href="r-programming-basics-i.html#exercise-3-5"><i class="fa fa-check"></i><b>4.11.1</b> Exercise 3-5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html"><i class="fa fa-check"></i><b>5</b> R programming basics II</a>
<ul>
<li class="chapter" data-level="5.1" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#functions"><i class="fa fa-check"></i><b>5.1</b> Functions</a></li>
<li class="chapter" data-level="5.2" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#vectorized-functions"><i class="fa fa-check"></i><b>5.2</b> Vectorized functions</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#exercise-4-1"><i class="fa fa-check"></i><b>5.2.1</b> Exercise 4-1</a></li>
<li class="chapter" data-level="5.2.2" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#exercise-4-2"><i class="fa fa-check"></i><b>5.2.2</b> Exercise 4-2</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#if-statements"><i class="fa fa-check"></i><b>5.3</b> if statements</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#exercise-4-3"><i class="fa fa-check"></i><b>5.3.1</b> Exercise 4-3</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#for-repeat-while"><i class="fa fa-check"></i><b>5.4</b> for, repeat, while</a></li>
<li class="chapter" data-level="5.5" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#file-read-and-write"><i class="fa fa-check"></i><b>5.5</b> File read and write</a></li>
<li class="chapter" data-level="5.6" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#excel-file-read-and-write"><i class="fa fa-check"></i><b>5.6</b> Excel file read and write</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#exercise-4-3-standard-deviation"><i class="fa fa-check"></i><b>5.6.1</b> Exercise 4-3 standard deviation</a></li>
<li class="chapter" data-level="5.6.2" data-path="r-programming-basics-ii.html"><a href="r-programming-basics-ii.html#exercise-4-4-barplot-with-error-bars"><i class="fa fa-check"></i><b>5.6.2</b> Exercise 4-4 barplot with error bars</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 프로그래밍과 데이터 분석</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-programming-basics-ii" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> R programming basics II</h1>
<div id="functions" class="section level2">
<h2><span class="header-section-number">5.1</span> Functions</h2>
<p>함수(Function)는 프로그래밍 과정에서 사용자가 필요로하는 기능을 수행하는 명령어를 말하며 다음과 같은 포멧으로 함수를 구현할 수 있습니다.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="r-programming-basics-ii.html#cb26-1"></a>myfunction.name &lt;-<span class="st"> </span><span class="cf">function</span>(para1, para2, ... ){</span>
<span id="cb26-2"><a href="r-programming-basics-ii.html#cb26-2"></a>  statements</span>
<span id="cb26-3"><a href="r-programming-basics-ii.html#cb26-3"></a>  <span class="kw">return</span>(object)</span>
<span id="cb26-4"><a href="r-programming-basics-ii.html#cb26-4"></a>}</span></code></pre></div>
<p>예를 들어 다음과 같은 <code>my_sine</code> 함수를 만들 수 있으며 <code>x</code>는 parameter (매개변수)이고 <code>y</code>는 반환값을 저장하는 지역변수 입니다.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="r-programming-basics-ii.html#cb27-1"></a>my_sine &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb27-2"><a href="r-programming-basics-ii.html#cb27-2"></a>    y &lt;-<span class="st"> </span><span class="kw">sin</span>(x)</span>
<span id="cb27-3"><a href="r-programming-basics-ii.html#cb27-3"></a>    <span class="kw">return</span>(y)</span>
<span id="cb27-4"><a href="r-programming-basics-ii.html#cb27-4"></a>}</span></code></pre></div>
<p>만들어진 함수는 다음과 같이 사용할 수 있습니다. 여기서 함수로 전달되는 값 <code>pi</code>는 argument (전달인자) 라고 합니다. 전달인자는 함수에서 정의된 매개변수의 갯수와 같은 수의 전달인자를 입력해 주어야 합니다.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="r-programming-basics-ii.html#cb28-1"></a><span class="kw">my_sine</span>(pi)</span></code></pre></div>
<ul>
<li>Terminology
<ul>
<li>function name: <code>my_sine</code></li>
<li>parameter: <code>x</code></li>
<li>argument: <code>pi</code></li>
<li>return value: <code>y</code></li>
</ul></li>
</ul>
<p>다음 코드를 보면 전역변수 <code>x</code>, <code>y</code>는 지역변수 <code>x</code>, <code>y</code>와 독립적으로 사용됨을 알 수 있습니다.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="r-programming-basics-ii.html#cb29-1"></a>my_half &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb29-2"><a href="r-programming-basics-ii.html#cb29-2"></a>  y &lt;-<span class="st"> </span>x<span class="op">/</span><span class="dv">2</span></span>
<span id="cb29-3"><a href="r-programming-basics-ii.html#cb29-3"></a>  <span class="kw">cat</span>(<span class="st">&quot;local variable x:&quot;</span>, x, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb29-4"><a href="r-programming-basics-ii.html#cb29-4"></a>  <span class="kw">cat</span>(<span class="st">&quot;local variable y:&quot;</span>, y, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb29-5"><a href="r-programming-basics-ii.html#cb29-5"></a>  <span class="kw">return</span>(y)</span>
<span id="cb29-6"><a href="r-programming-basics-ii.html#cb29-6"></a>}</span>
<span id="cb29-7"><a href="r-programming-basics-ii.html#cb29-7"></a>y &lt;-<span class="st"> </span><span class="dv">100</span></span>
<span id="cb29-8"><a href="r-programming-basics-ii.html#cb29-8"></a>x &lt;-<span class="st"> </span><span class="dv">20</span></span>
<span id="cb29-9"><a href="r-programming-basics-ii.html#cb29-9"></a><span class="kw">cat</span>(<span class="st">&quot;Global variable x:&quot;</span>, x, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb29-10"><a href="r-programming-basics-ii.html#cb29-10"></a><span class="kw">cat</span>(<span class="st">&quot;Global variable y:&quot;</span>, y, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb29-11"><a href="r-programming-basics-ii.html#cb29-11"></a><span class="kw">my_half</span>(<span class="dv">5</span>)</span></code></pre></div>
<p><code>log</code>, <code>sin</code>등의 함수들은 Built-in function으로 같은 이름의 함수를 만들지 않도록 주의합니다.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="r-programming-basics-ii.html#cb30-1"></a>x &lt;-<span class="st"> </span>pi</span>
<span id="cb30-2"><a href="r-programming-basics-ii.html#cb30-2"></a><span class="kw">sin</span>(x)</span>
<span id="cb30-3"><a href="r-programming-basics-ii.html#cb30-3"></a><span class="kw">sqrt</span>(x)</span>
<span id="cb30-4"><a href="r-programming-basics-ii.html#cb30-4"></a><span class="kw">log</span>(x)</span>
<span id="cb30-5"><a href="r-programming-basics-ii.html#cb30-5"></a><span class="kw">log</span>(x, <span class="dv">10</span>)</span>
<span id="cb30-6"><a href="r-programming-basics-ii.html#cb30-6"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb30-7"><a href="r-programming-basics-ii.html#cb30-7"></a>x <span class="op">+</span><span class="st"> </span>x</span>
<span id="cb30-8"><a href="r-programming-basics-ii.html#cb30-8"></a><span class="kw">mean</span>(x)</span>
<span id="cb30-9"><a href="r-programming-basics-ii.html#cb30-9"></a><span class="kw">sum</span>(x)<span class="op">/</span><span class="kw">length</span>(x)</span></code></pre></div>
</div>
<div id="vectorized-functions" class="section level2">
<h2><span class="header-section-number">5.2</span> Vectorized functions</h2>
<p>초기에 R이 다른 프로그래밍 언어에 비해서 경쟁력을 갖는 이유 중 하나가 바로 이 기능 이였습니다. <code>vector</code> 변수에 들어있는 각 원소들에 대해서 특정 함수나 연산을 적용하고 싶을 경우 전통 방식의 <code>C</code>나 <code>Java</code>등의 언어에서는 원소의 개수만큼 반복문을 돌면서 원하는 작업을 수행 했습니다. 그러나 R의 <code>vectorization</code> 기능은 별도의 반복문 없이 vector 안에 있는 원소들에 대한 함수 실행 또는 연산을 수행할 수 있습니다.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="r-programming-basics-ii.html#cb31-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb31-2"><a href="r-programming-basics-ii.html#cb31-2"></a>x <span class="op">+</span><span class="st"> </span>x</span>
<span id="cb31-3"><a href="r-programming-basics-ii.html#cb31-3"></a><span class="kw">sqrt</span>(x)</span>
<span id="cb31-4"><a href="r-programming-basics-ii.html#cb31-4"></a><span class="kw">sin</span>(x)</span>
<span id="cb31-5"><a href="r-programming-basics-ii.html#cb31-5"></a><span class="kw">log</span>(x)</span>
<span id="cb31-6"><a href="r-programming-basics-ii.html#cb31-6"></a>x<span class="op">-</span><span class="kw">mean</span>(x)</span>
<span id="cb31-7"><a href="r-programming-basics-ii.html#cb31-7"></a></span>
<span id="cb31-8"><a href="r-programming-basics-ii.html#cb31-8"></a><span class="kw">length</span>(x)</span>
<span id="cb31-9"><a href="r-programming-basics-ii.html#cb31-9"></a>test_scores &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">Alice =</span> <span class="dv">87</span>, <span class="dt">Bob =</span> <span class="dv">72</span>, <span class="dt">James=</span> <span class="dv">99</span>)</span>
<span id="cb31-10"><a href="r-programming-basics-ii.html#cb31-10"></a><span class="kw">names</span>(test_scores)</span></code></pre></div>
<div id="exercise-4-1" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Exercise 4-1</h3>
<p>다음은 한 다이어트 프로그램의 수행 전 후의 다섯 명의 몸무게이다.</p>
<p><img src="images/01/01-21.PNG" /></p>
<ul>
<li>각각을 before 와 after 이름의 변수에 저장 후 몸무게 값의 변화량을 계산하시오.
<ul>
<li>before값들의 평균을 구하시오 (mean() 함수 사용)</li>
</ul></li>
<li>my_mean 이라는 이름의 함수로 평균을 구하는 코드를 작성 하시오 (빌트인 함수 사용하지 않음)
<ul>
<li>함수이름: my_mean</li>
<li>parameter: x</li>
<li>return 값: y</li>
<li>(x[1]+x[2]+x[3]+x[4]+x[5])/5</li>
</ul></li>
<li>빌트인 함수 sum()과 length()를 이용해 동일한 기능을 하는 함수를 작성하시오
<ul>
<li>함수이름 my_mean2</li>
<li>sum(), length() 사용</li>
</ul></li>
</ul>
</div>
<div id="exercise-4-2" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Exercise 4-2</h3>
<p>다음 네 학생이 있으며 “John”,“James”,“Sara”, “Lilly” 각 나이는 다음과 같음. 21, 55, 23, 53. ages 라는 변수를 생성하고 각 나이를 저장한 후 who라는 이름의 함수를 만들어서 50살 이상인 사람의 이름을 출력하는 함수를 만드시오.</p>
<ul>
<li>ages라는 변수에 나이 저장, c() 함수 이용, vector 형태 저장</li>
<li>names() 함수 이용해서 각 ages 벡터의 각 요소에 이름 붙이기</li>
<li>which() 함수 사용해서 나이가 50보다 큰 인덱스 찾고 해당 인덱스 값 출력 하기</li>
<li>ages를 메개변수로 받아서 나이가 50보다 큰 인덱스 찾고 해당 인덱스의 값을 반환해 주는 who 함수 만들고 사용</li>
</ul>
</div>
</div>
<div id="if-statements" class="section level2">
<h2><span class="header-section-number">5.3</span> if statements</h2>
<p>R에서의 제어문의 사용은 다른 프로그래밍 언어와 거의 유사합니다. 먼저 <code>if</code> 는 다음과 같은 형식으로 사용되며 <code>()</code> 안에 특정 조건 판단을 위한 표현이 들어갑니다.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="r-programming-basics-ii.html#cb32-1"></a><span class="cf">if</span>(condition){</span>
<span id="cb32-2"><a href="r-programming-basics-ii.html#cb32-2"></a>  expr_<span class="dv">1</span></span>
<span id="cb32-3"><a href="r-programming-basics-ii.html#cb32-3"></a>}<span class="cf">else</span>{</span>
<span id="cb32-4"><a href="r-programming-basics-ii.html#cb32-4"></a>  expr_<span class="dv">2</span></span>
<span id="cb32-5"><a href="r-programming-basics-ii.html#cb32-5"></a>}</span></code></pre></div>
<p>특히 <code>condition</code>은 하나의 원소에 대한 조건 판단문으로 <code>T</code> 또는 <code>F</code> 값 하나만을 반환하는 문장이어야 합니다. 위 코드는 만약 <code>condition</code> 조건이 <code>True</code> 이면 expr_1를 실행하고 <code>False</code>이면 expr_2를 실행하라는 명령입니다. <code>condition</code> 안에서 사용되는 비교 연산자들은 다음과 같습니다.</p>
<p><img src="images/04/01.PNG" /></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="r-programming-basics-ii.html#cb33-1"></a>x &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb33-2"><a href="r-programming-basics-ii.html#cb33-2"></a><span class="cf">if</span>(x<span class="op">%%</span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span>){</span>
<span id="cb33-3"><a href="r-programming-basics-ii.html#cb33-3"></a>  <span class="kw">cat</span>(<span class="st">&quot;Odd&quot;</span>)</span>
<span id="cb33-4"><a href="r-programming-basics-ii.html#cb33-4"></a>}<span class="cf">else</span>{</span>
<span id="cb33-5"><a href="r-programming-basics-ii.html#cb33-5"></a>  <span class="kw">cat</span>(<span class="st">&quot;Even&quot;</span>)</span>
<span id="cb33-6"><a href="r-programming-basics-ii.html#cb33-6"></a>} </span>
<span id="cb33-7"><a href="r-programming-basics-ii.html#cb33-7"></a></span>
<span id="cb33-8"><a href="r-programming-basics-ii.html#cb33-8"></a>x &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb33-9"><a href="r-programming-basics-ii.html#cb33-9"></a><span class="cf">if</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">4</span>){</span>
<span id="cb33-10"><a href="r-programming-basics-ii.html#cb33-10"></a>   <span class="kw">print</span>(<span class="st">&quot;Positive number less than four&quot;</span>)</span>
<span id="cb33-11"><a href="r-programming-basics-ii.html#cb33-11"></a>}</span>
<span id="cb33-12"><a href="r-programming-basics-ii.html#cb33-12"></a><span class="cf">if</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="kw">print</span>(<span class="st">&quot;Positive number&quot;</span>)</span>
<span id="cb33-13"><a href="r-programming-basics-ii.html#cb33-13"></a></span>
<span id="cb33-14"><a href="r-programming-basics-ii.html#cb33-14"></a></span>
<span id="cb33-15"><a href="r-programming-basics-ii.html#cb33-15"></a>x &lt;-<span class="st"> </span><span class="dv">-5</span></span>
<span id="cb33-16"><a href="r-programming-basics-ii.html#cb33-16"></a><span class="cf">if</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>){</span>
<span id="cb33-17"><a href="r-programming-basics-ii.html#cb33-17"></a>    <span class="kw">print</span>(<span class="st">&quot;Non-negative number&quot;</span>)</span>
<span id="cb33-18"><a href="r-programming-basics-ii.html#cb33-18"></a>} <span class="cf">else</span> <span class="cf">if</span>(x <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">-5</span>){</span>
<span id="cb33-19"><a href="r-programming-basics-ii.html#cb33-19"></a>    <span class="kw">print</span>(<span class="st">&quot;Negative number greater than -5&quot;</span>)</span>
<span id="cb33-20"><a href="r-programming-basics-ii.html#cb33-20"></a>} <span class="cf">else</span> {</span>
<span id="cb33-21"><a href="r-programming-basics-ii.html#cb33-21"></a>  <span class="kw">print</span>(<span class="st">&quot;Negative number less than -5&quot;</span>)</span>
<span id="cb33-22"><a href="r-programming-basics-ii.html#cb33-22"></a>}</span>
<span id="cb33-23"><a href="r-programming-basics-ii.html#cb33-23"></a></span>
<span id="cb33-24"><a href="r-programming-basics-ii.html#cb33-24"></a><span class="cf">if</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb33-25"><a href="r-programming-basics-ii.html#cb33-25"></a>    <span class="kw">print</span>(<span class="st">&quot;Non-negative number&quot;</span>)</span>
<span id="cb33-26"><a href="r-programming-basics-ii.html#cb33-26"></a><span class="cf">else</span></span>
<span id="cb33-27"><a href="r-programming-basics-ii.html#cb33-27"></a>    <span class="kw">print</span>(<span class="st">&quot;Negative number&quot;</span>)</span></code></pre></div>
<div id="exercise-4-3" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Exercise 4-3</h3>
<p>1부터 100까지 수를 x라는 변수에 저장하고 홀수 이거나 10의 배수인 수들을 골라내는 코드를 작성 하시오 (<code>%%</code> 나머지 연산, <code>if</code>문 사용)</p>
</div>
</div>
<div id="for-repeat-while" class="section level2">
<h2><span class="header-section-number">5.4</span> for, repeat, while</h2>
</div>
<div id="file-read-and-write" class="section level2">
<h2><span class="header-section-number">5.5</span> File read and write</h2>
<p>텍스트 파일의 경우 아래와 같이 csv 또는 txt 파일로 저장하여 메모장으로 열어 확인할 수 있으며 읽어올 경우 구분자 (sep 파라메터) 나 header를 (header 파라메터) 읽을지 읽지 않을지 등을 옵션으로 지정할 수 있습니다.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="r-programming-basics-ii.html#cb34-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb34-2"><a href="r-programming-basics-ii.html#cb34-2"></a>y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>)</span>
<span id="cb34-3"><a href="r-programming-basics-ii.html#cb34-3"></a>xy&lt;-<span class="kw">data.frame</span>(<span class="dt">x=</span>x, <span class="dt">y=</span>y)</span>
<span id="cb34-4"><a href="r-programming-basics-ii.html#cb34-4"></a></span>
<span id="cb34-5"><a href="r-programming-basics-ii.html#cb34-5"></a><span class="kw">write.table</span>(xy, <span class="dt">file=</span><span class="st">&quot;table_write.txt&quot;</span>)</span>
<span id="cb34-6"><a href="r-programming-basics-ii.html#cb34-6"></a><span class="kw">write.table</span>(xy, <span class="dt">file=</span><span class="st">&quot;table_write.txt&quot;</span>, <span class="dt">quote=</span>F)</span>
<span id="cb34-7"><a href="r-programming-basics-ii.html#cb34-7"></a><span class="kw">write.table</span>(xy, <span class="dt">file=</span><span class="st">&quot;table_write.txt&quot;</span>, <span class="dt">quote=</span>F, <span class="dt">row.names=</span>F)</span>
<span id="cb34-8"><a href="r-programming-basics-ii.html#cb34-8"></a><span class="kw">write.table</span>(xy, <span class="dt">file=</span><span class="st">&quot;table_write.txt&quot;</span>, <span class="dt">quote=</span>F, <span class="dt">row.names=</span>F, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>)</span>
<span id="cb34-9"><a href="r-programming-basics-ii.html#cb34-9"></a><span class="kw">write.table</span>(xy, <span class="dt">file=</span><span class="st">&quot;table_write.csv&quot;</span>, <span class="dt">quote=</span>F, <span class="dt">row.names=</span>F, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>)</span>
<span id="cb34-10"><a href="r-programming-basics-ii.html#cb34-10"></a></span>
<span id="cb34-11"><a href="r-programming-basics-ii.html#cb34-11"></a>mydata&lt;-<span class="kw">read.table</span>(<span class="dt">file=</span><span class="st">&quot;table_write.csv&quot;</span>)</span>
<span id="cb34-12"><a href="r-programming-basics-ii.html#cb34-12"></a>mydata&lt;-<span class="kw">read.table</span>(<span class="dt">file=</span><span class="st">&quot;table_write.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>)</span>
<span id="cb34-13"><a href="r-programming-basics-ii.html#cb34-13"></a>mydata&lt;-<span class="kw">read.table</span>(<span class="dt">file=</span><span class="st">&quot;table_write.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>, <span class="dt">header=</span>T)</span>
<span id="cb34-14"><a href="r-programming-basics-ii.html#cb34-14"></a><span class="kw">plot</span>(mydata<span class="op">$</span>x, mydata<span class="op">$</span>z)</span></code></pre></div>
</div>
<div id="excel-file-read-and-write" class="section level2">
<h2><span class="header-section-number">5.6</span> Excel file read and write</h2>
<p>엑셀파일은 readxl 이라는 R 패키지를 활용하여 읽거나 쓸 수 있습니다.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="r-programming-basics-ii.html#cb35-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</span></code></pre></div>
<p>실습 파일은 형광 세포를 배양하여 형광리더기를 이용해 얻어진 실제 데이터이며 <a href="https://github.com/greendaygh/2019-R-programming/blob/master/Rprog04-fl.xls">Rprog04-fl.xls</a> 에서 다운로드 받을 수 있습니다. read_excel 함수를 이용하여 파일의 내용을 읽어오면 기본 자료형이 tibble 입니다. tibble은 최근 많이 쓰이는 R object로 data.frame과 유사하나 입력값의 type, name, rowname을 임으로 바꿀 수 없다는 점이 다릅니다. tibble에 익숙해지는 것이 좋으나 본 강의에서는 직관적인 진행을 위하여 data.frame으로 전환하여 사용하겠습니다.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="r-programming-basics-ii.html#cb36-1"></a><span class="kw">library</span>(readxl)</span></code></pre></div>
<pre><code>## Warning: package &#39;readxl&#39; was built under R version 3.5.3</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="r-programming-basics-ii.html#cb38-1"></a>mydata &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;Rprog04-fl.xls&quot;</span>, <span class="dt">sheet=</span><span class="dv">2</span>, <span class="dt">skip =</span> <span class="dv">6</span>, <span class="dt">col_names=</span>F)</span></code></pre></div>
<pre><code>## New names:
## * `` -&gt; ...1
## * `` -&gt; ...2
## * `` -&gt; ...3
## * `` -&gt; ...4
## * `` -&gt; ...5
## * ... and 7 more problems</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="r-programming-basics-ii.html#cb40-1"></a>myod &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(mydata[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>, ])</span>
<span id="cb40-2"><a href="r-programming-basics-ii.html#cb40-2"></a>mygfp &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(mydata[<span class="dv">12</span><span class="op">:</span><span class="dv">21</span>, ])</span></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="r-programming-basics-ii.html#cb41-1"></a><span class="kw">class</span>(myod[,<span class="dv">1</span>])</span>
<span id="cb41-2"><a href="r-programming-basics-ii.html#cb41-2"></a><span class="kw">class</span>(myod[,<span class="dv">2</span>])</span></code></pre></div>
<p>엑셀파일에는 두 종류의 (OD600nm, fluorescence) 데이터가 저장되어 있으며 각각을 위에서 1~8 row 그리고 12~21 row 값들을 모두 myod와 mygfp로 저장했습니다. 그러나 엑셀파일을 보면 첫번째 컬럼에 관측값 외에 다른 정보들에 대한 텍스트가 적혀 있으며 이로 인해 행렬의 가장 첫 컬럼의 데이터 타입이 character가 되고 나머지 컬럼은 numeric으로 자동 전환 되어 data.frame 오브젝트인 mydata에 저장되게 됩니다. 따라서 아래와 같이 문자형을 숫자형으로 전환하여 추후 연산을 진행하게 됩니다.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="r-programming-basics-ii.html#cb42-1"></a>myod[,<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(myod[,<span class="dv">1</span>])</span>
<span id="cb42-2"><a href="r-programming-basics-ii.html#cb42-2"></a>mygfp[,<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(mygfp[,<span class="dv">1</span>])</span></code></pre></div>
<p>수행한 실험의 디자인에 따라서 두 그룹으로 나누고 적절한 이름을 저장합니다.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="r-programming-basics-ii.html#cb43-1"></a>myod_treat &lt;-<span class="st"> </span>myod[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>,]</span>
<span id="cb43-2"><a href="r-programming-basics-ii.html#cb43-2"></a>myod_control &lt;-<span class="st"> </span>myod[<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>,]</span>
<span id="cb43-3"><a href="r-programming-basics-ii.html#cb43-3"></a></span>
<span id="cb43-4"><a href="r-programming-basics-ii.html#cb43-4"></a>sample_names &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Sample&quot;</span>, <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>), <span class="dt">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb43-5"><a href="r-programming-basics-ii.html#cb43-5"></a>replicate_labels &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Rep&quot;</span>, <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>), <span class="dt">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb43-6"><a href="r-programming-basics-ii.html#cb43-6"></a></span>
<span id="cb43-7"><a href="r-programming-basics-ii.html#cb43-7"></a><span class="kw">rownames</span>(myod_treat) &lt;-<span class="st"> </span>replicate_labels</span>
<span id="cb43-8"><a href="r-programming-basics-ii.html#cb43-8"></a><span class="kw">colnames</span>(myod_treat) &lt;-<span class="st"> </span>sample_names</span>
<span id="cb43-9"><a href="r-programming-basics-ii.html#cb43-9"></a><span class="kw">rownames</span>(myod_control) &lt;-<span class="st"> </span>replicate_labels </span>
<span id="cb43-10"><a href="r-programming-basics-ii.html#cb43-10"></a><span class="kw">colnames</span>(myod_control) &lt;-<span class="st"> </span>sample_names</span>
<span id="cb43-11"><a href="r-programming-basics-ii.html#cb43-11"></a></span>
<span id="cb43-12"><a href="r-programming-basics-ii.html#cb43-12"></a>mean_treat &lt;-<span class="st"> </span><span class="kw">colMeans</span>(myod_treat)</span>
<span id="cb43-13"><a href="r-programming-basics-ii.html#cb43-13"></a>mean_control &lt;-<span class="st"> </span><span class="kw">colMeans</span>(myod_control)</span></code></pre></div>
<p>위 예제의 colMean 과 같은 함수는 column 또는 row 단위로 해당하는 모든 값들에 대해 연산을 수행해주는 함수로 colMean은 평균을 계산하는 함수이고 일반적으로는 다음과 같이 apply 함수와 mean 함수를 이용해서 같은 기능을 수행할 수 있습니다. mean 함수 외 임의의 원하는 함수를 만들어 사용할 수 도 있습니다. 참고로 sd는 표준편차를 구해주는 함수 입니다.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="r-programming-basics-ii.html#cb44-1"></a><span class="kw">apply</span>(myod_control, <span class="dv">1</span>, mean)</span></code></pre></div>
<pre><code>##      Rep1      Rep2      Rep3 
## 0.8069922 0.7706701 0.7873404</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="r-programming-basics-ii.html#cb46-1"></a><span class="kw">apply</span>(myod_control, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>##   Sample1   Sample2   Sample3   Sample4   Sample5   Sample6   Sample7   Sample8 
## 0.7757480 0.7807732 0.7628736 0.7472908 0.7034527 0.6963549 0.8094640 0.8145531 
##   Sample9  Sample10  Sample11  Sample12 
## 0.8301742 0.8390556 0.8447189 0.8555517</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="r-programming-basics-ii.html#cb48-1"></a><span class="kw">apply</span>(myod_control, <span class="dv">2</span>, <span class="cf">function</span>(x){ </span>
<span id="cb48-2"><a href="r-programming-basics-ii.html#cb48-2"></a>  xmean &lt;-<span class="st"> </span><span class="kw">mean</span>(x) </span>
<span id="cb48-3"><a href="r-programming-basics-ii.html#cb48-3"></a>  <span class="kw">return</span>(xmean)</span>
<span id="cb48-4"><a href="r-programming-basics-ii.html#cb48-4"></a>  })</span></code></pre></div>
<pre><code>##   Sample1   Sample2   Sample3   Sample4   Sample5   Sample6   Sample7   Sample8 
## 0.7757480 0.7807732 0.7628736 0.7472908 0.7034527 0.6963549 0.8094640 0.8145531 
##   Sample9  Sample10  Sample11  Sample12 
## 0.8301742 0.8390556 0.8447189 0.8555517</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="r-programming-basics-ii.html#cb50-1"></a><span class="kw">apply</span>(myod_control, <span class="dv">2</span>, sd)</span></code></pre></div>
<pre><code>##     Sample1     Sample2     Sample3     Sample4     Sample5     Sample6 
## 0.015981356 0.023394455 0.032168135 0.034528460 0.035805916 0.014999636 
##     Sample7     Sample8     Sample9    Sample10    Sample11    Sample12 
## 0.017801936 0.017947840 0.010253370 0.006202754 0.022386592 0.012685731</code></pre>
<p>본 실습에서는 각 그룹의 평균을 비교하는 막대그래프를 그려보겠습니다.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="r-programming-basics-ii.html#cb52-1"></a><span class="kw">plot</span>(mean_treat, <span class="dt">type=</span><span class="st">&quot;h&quot;</span>)</span></code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="r-programming-basics-ii.html#cb53-1"></a><span class="kw">barplot</span>(mean_treat, <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span></code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-42-2.png" width="672" /></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="r-programming-basics-ii.html#cb54-1"></a>mean_test &lt;-<span class="st"> </span><span class="kw">data.frame</span>(mean_treat, mean_control)</span>
<span id="cb54-2"><a href="r-programming-basics-ii.html#cb54-2"></a><span class="kw">barplot</span>(<span class="kw">t</span>(mean_test), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dt">beside=</span>T)</span></code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-42-3.png" width="672" /></p>
<div id="exercise-4-3-standard-deviation" class="section level3">
<h3><span class="header-section-number">5.6.1</span> Exercise 4-3 standard deviation</h3>
<p>앞서 사용한 sd 함수는 표준편차를 구해주는 기본 제공 함수입니다. 아래는 같은 기능을 하는 함수를 만들어 보는 실습 예제 입니다.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="r-programming-basics-ii.html#cb55-1"></a><span class="co">## exercise 3-2 </span></span>
<span id="cb55-2"><a href="r-programming-basics-ii.html#cb55-2"></a>mysd &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb55-3"><a href="r-programming-basics-ii.html#cb55-3"></a>  xmean &lt;-<span class="st"> </span><span class="kw">sum</span>(x)<span class="op">/</span><span class="kw">length</span>(x)</span>
<span id="cb55-4"><a href="r-programming-basics-ii.html#cb55-4"></a>  tmpdif &lt;-<span class="st"> </span>x<span class="op">-</span>xmean</span>
<span id="cb55-5"><a href="r-programming-basics-ii.html#cb55-5"></a>  xvar &lt;-<span class="st"> </span><span class="kw">sum</span>(tmpdif<span class="op">^</span><span class="dv">2</span>)<span class="op">/</span>(<span class="kw">length</span>(x)<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb55-6"><a href="r-programming-basics-ii.html#cb55-6"></a>  xsd &lt;-<span class="st"> </span><span class="kw">sqrt</span>(xvar)</span>
<span id="cb55-7"><a href="r-programming-basics-ii.html#cb55-7"></a>  <span class="kw">return</span>(xsd)</span>
<span id="cb55-8"><a href="r-programming-basics-ii.html#cb55-8"></a>}</span>
<span id="cb55-9"><a href="r-programming-basics-ii.html#cb55-9"></a></span>
<span id="cb55-10"><a href="r-programming-basics-ii.html#cb55-10"></a>x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">10</span>)</span>
<span id="cb55-11"><a href="r-programming-basics-ii.html#cb55-11"></a><span class="kw">mysd</span>(x)</span></code></pre></div>
<pre><code>## [1] 32.86403</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="r-programming-basics-ii.html#cb57-1"></a><span class="kw">sd</span>(x)</span></code></pre></div>
<pre><code>## [1] 32.86403</code></pre>
</div>
<div id="exercise-4-4-barplot-with-error-bars" class="section level3">
<h3><span class="header-section-number">5.6.2</span> Exercise 4-4 barplot with error bars</h3>
<p>앞서 그려본 막대그래프에 에러바를 넣어보는 코드 입니다. 먼저 평균과 표준편차 데이터를 apply 함수를 통해 얻어내고 barplot을 수행합니다. 에러바의 경우 arrows 함수를 사용하는데 사용되는 파라메터의 입력되는 값을 바꿔서 그림을 그려보면 그 의미를 파악하는데 도움이 되겠습니다.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="r-programming-basics-ii.html#cb59-1"></a><span class="co">## Exercise 3-3) barplot with sd</span></span>
<span id="cb59-2"><a href="r-programming-basics-ii.html#cb59-2"></a></span>
<span id="cb59-3"><a href="r-programming-basics-ii.html#cb59-3"></a>control_mean &lt;-<span class="st"> </span><span class="kw">apply</span>(myod_control, <span class="dv">2</span>, <span class="cf">function</span>(x){<span class="kw">mean</span>(x)})</span>
<span id="cb59-4"><a href="r-programming-basics-ii.html#cb59-4"></a>control_sd &lt;-<span class="st"> </span><span class="kw">apply</span>(myod_control, <span class="dv">2</span>, mysd)</span>
<span id="cb59-5"><a href="r-programming-basics-ii.html#cb59-5"></a></span>
<span id="cb59-6"><a href="r-programming-basics-ii.html#cb59-6"></a><span class="kw">barplot</span>(control_mean, <span class="dt">width=</span><span class="fl">0.83</span>, <span class="dt">space=</span><span class="fl">0.2</span>, <span class="dt">col=</span><span class="st">&quot;gray&quot;</span>, <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb59-7"><a href="r-programming-basics-ii.html#cb59-7"></a></span>
<span id="cb59-8"><a href="r-programming-basics-ii.html#cb59-8"></a><span class="kw">arrows</span>(<span class="fl">0.5</span>, control_mean[<span class="dv">1</span>], <span class="fl">0.5</span>, control_mean[<span class="dv">1</span>]<span class="op">+</span>control_sd[<span class="dv">1</span>], <span class="dt">length=</span><span class="fl">0.1</span>, <span class="dt">angle=</span><span class="dv">90</span>)</span>
<span id="cb59-9"><a href="r-programming-basics-ii.html#cb59-9"></a><span class="kw">arrows</span>(<span class="fl">0.5</span>, control_mean[<span class="dv">1</span>], <span class="fl">0.5</span>, control_mean[<span class="dv">1</span>]<span class="op">-</span>control_sd[<span class="dv">1</span>], <span class="dt">length=</span><span class="fl">0.1</span>, <span class="dt">angle=</span><span class="dv">90</span>)</span>
<span id="cb59-10"><a href="r-programming-basics-ii.html#cb59-10"></a>lab &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;SD:&quot;</span>, <span class="kw">round</span>(control_mean[<span class="dv">1</span>]<span class="op">+</span>control_sd[<span class="dv">1</span>],<span class="dv">1</span>))</span>
<span id="cb59-11"><a href="r-programming-basics-ii.html#cb59-11"></a><span class="kw">text</span>(<span class="fl">0.5</span>, control_mean[<span class="dv">1</span>]<span class="op">+</span>control_sd[<span class="dv">1</span>]<span class="op">+</span><span class="fl">0.05</span>, <span class="dt">labels =</span> lab)</span>
<span id="cb59-12"><a href="r-programming-basics-ii.html#cb59-12"></a></span>
<span id="cb59-13"><a href="r-programming-basics-ii.html#cb59-13"></a><span class="kw">arrows</span>(<span class="fl">1.5</span>, control_mean[<span class="dv">2</span>], <span class="fl">1.5</span>, control_mean[<span class="dv">2</span>]<span class="op">+</span>control_sd[<span class="dv">2</span>], <span class="dt">length=</span><span class="fl">0.1</span>, <span class="dt">angle=</span><span class="dv">90</span>)</span>
<span id="cb59-14"><a href="r-programming-basics-ii.html#cb59-14"></a><span class="kw">arrows</span>(<span class="fl">1.5</span>, control_mean[<span class="dv">2</span>], <span class="fl">1.5</span>, control_mean[<span class="dv">2</span>]<span class="op">-</span>control_sd[<span class="dv">2</span>], <span class="dt">length=</span><span class="fl">0.1</span>, <span class="dt">angle=</span><span class="dv">90</span>)</span>
<span id="cb59-15"><a href="r-programming-basics-ii.html#cb59-15"></a>lab &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;SD:&quot;</span>, <span class="kw">round</span>(control_mean[<span class="dv">2</span>]<span class="op">+</span>control_sd[<span class="dv">2</span>],<span class="dv">1</span>))</span>
<span id="cb59-16"><a href="r-programming-basics-ii.html#cb59-16"></a><span class="kw">text</span>(<span class="fl">1.5</span>, control_mean[<span class="dv">2</span>]<span class="op">+</span>control_sd[<span class="dv">2</span>]<span class="op">+</span><span class="fl">0.05</span>, <span class="dt">labels =</span> lab)</span></code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
<p>그러나 위 12개의 bar 모두에 대해서 arrows 함수를 그리기 보다는 <strong>for 문을 이용한 반복 실행을</strong> 수행하는 것이 효율적 입니다. for 문의 사용 형식과 반복 횟수 그리고 반복하며 변화되는 값을 갖는 변수에 대한 의미를 파악하고 사용하는 것이 중요합니다. for문의 사용법은 <a href="https://github.com/greendaygh/2019-R-programming/blob/master/03-Rprog.pdf">강의노트</a> 를 참고하세요.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="r-programming-basics-ii.html#cb60-1"></a><span class="co">## Exercise 3-4) barplot with sd using for</span></span>
<span id="cb60-2"><a href="r-programming-basics-ii.html#cb60-2"></a><span class="kw">barplot</span>(control_mean, <span class="dt">width=</span><span class="fl">0.83</span>, <span class="dt">space=</span><span class="fl">0.2</span>, <span class="dt">col=</span><span class="st">&quot;gray&quot;</span>, <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb60-3"><a href="r-programming-basics-ii.html#cb60-3"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(control_mean)){</span>
<span id="cb60-4"><a href="r-programming-basics-ii.html#cb60-4"></a>  xpos &lt;-<span class="st"> </span><span class="fl">0.5</span><span class="op">+</span>i<span class="dv">-1</span></span>
<span id="cb60-5"><a href="r-programming-basics-ii.html#cb60-5"></a>  <span class="kw">arrows</span>(xpos, control_mean[i], xpos, control_mean[i]<span class="op">+</span>control_sd[i], <span class="dt">length=</span><span class="fl">0.1</span>, <span class="dt">angle=</span><span class="dv">90</span>)</span>
<span id="cb60-6"><a href="r-programming-basics-ii.html#cb60-6"></a>  <span class="kw">arrows</span>(xpos, control_mean[i], xpos, control_mean[i]<span class="op">-</span>control_sd[i], <span class="dt">length=</span><span class="fl">0.1</span>, <span class="dt">angle=</span><span class="dv">90</span>)</span>
<span id="cb60-7"><a href="r-programming-basics-ii.html#cb60-7"></a>  lab &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;SD:&quot;</span>, <span class="kw">round</span>(control_mean[i]<span class="op">+</span>control_sd[i],<span class="dv">1</span>))</span>
<span id="cb60-8"><a href="r-programming-basics-ii.html#cb60-8"></a>  <span class="kw">text</span>(xpos, control_mean[i]<span class="op">+</span>control_sd[i]<span class="op">+</span><span class="fl">0.05</span>, <span class="dt">labels =</span> lab)</span>
<span id="cb60-9"><a href="r-programming-basics-ii.html#cb60-9"></a>}</span></code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
<p>마지막으로 실습 예제 4-5는 엑셀파일 이름을 argument로 받아서 파일 내용을 읽고 데이터를 두 그룹으로 나누어 평균을 계산한 후 plot까지 그려주는 함수를 만드는 실습 예제 입니다. 다음 시간에 이어서 합니다.</p>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="크리에이티브 커먼즈 라이선스" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br />이 저작물은 <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">크리에이티브 커먼즈 저작자표시-비영리-변경금지 4.0 국제 라이선스</a>에 따라 이용할 수 있습니다.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-programming-basics-i.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
